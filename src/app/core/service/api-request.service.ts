import { HttpClient } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { Observable } from 'rxjs';
import { retry } from 'rxjs/operators';
import { environment } from 'src/environments/environment.prod';

@Injectable({
  providedIn: 'root'
})
export class ApiRequestService {

  url: string = environment.API

  constructor(private httpClient: HttpClient) { }

  get(endpoint: string): Observable<any[]> {
    return this.httpClient.get<any[]>(this.url+endpoint+"/")
      .pipe(
        retry(0),
        )
  }

  getQuery(endpoint: string, data: any): Observable<any[]> {
    let queryParams = new URLSearchParams();
    for (let key in data) {
      queryParams.append(key, data[key]);
    }
    console.log(queryParams.toString());
    return this.httpClient.get<any[]>(this.url+endpoint+"/"+'?'+queryParams)
      .pipe(
        retry(0),
        )
  }

  post(endpoint: string, data: any): Observable<any[]> {
    return this.httpClient.post<any[]>(this.url+endpoint+"/", data)
      .pipe(
        retry(0),
        )
  }

  put(endpoint: string, data: any): Observable<any[]> {
    return this.httpClient.put<any[]>(this.url+endpoint+"/", data)
      .pipe(
        retry(0),
        )
  }

  delete(endpoint: string): Observable<any[]> {
    return this.httpClient.delete<any[]>(this.url+endpoint+"/")
      .pipe(
        retry(0),
        )
  }

  

}
